@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }
  body {
    @apply m-0 font-sans text-text min-h-screen;
    background: radial-gradient(80% 60% at 20% 10%, #20283a 0%, #0f1115 55%),
      radial-gradient(70% 50% at 80% 20%, #1a2a2f 0%, #0f1115 60%);
  }
}

@layer components {
  .app {
    @apply px-6 py-8 pb-16 max-w-[1200px] mx-auto;
  }

  .hero {
    @apply flex justify-between gap-6 p-8 rounded-[20px] border border-border;
    background: linear-gradient(135deg, rgba(34, 244, 179, 0.08), transparent);
    backdrop-filter: blur(8px);
  }

  .hero h1 {
    @apply my-2 tracking-[-0.02em] text-[clamp(28px,3.5vw,44px)];
  }

  .hero p {
    @apply m-0 text-muted max-w-[520px] leading-7;
  }

  .tag {
    @apply inline-block text-xs uppercase tracking-[0.18em] text-accent font-mono;
  }

  .wallet {
    @apply flex flex-col gap-2 items-end;
  }

  .status {
    @apply text-xs text-muted font-mono;
  }

  .grid-layout {
    @apply grid gap-4 mt-6;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .card {
    @apply bg-card border border-border rounded-2xl p-[18px] flex flex-col gap-3 min-h-[220px];
  }

  .card h2 {
    @apply m-0 text-lg;
  }

  .card.full {
    @apply col-span-full;
  }

  label {
    @apply flex flex-col text-xs text-muted gap-1.5;
  }

  input {
    @apply px-3 py-2.5 rounded-[10px] border border-border bg-[#121621] text-text text-sm;
  }

  button {
    @apply px-3.5 py-2.5 rounded-xl border-0 bg-accent text-[#10141c] font-semibold cursor-pointer;
  }

  button:disabled {
    @apply bg-[#2a3142] text-muted cursor-not-allowed;
  }

  button.ghost {
    @apply bg-transparent border border-border text-text;
  }

  .hint {
    @apply text-muted text-xs;
  }

  .row {
    @apply grid gap-2;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  }

  .split {
    @apply grid gap-3;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .label {
    @apply text-xs text-muted mb-2;
  }

  .code {
    @apply font-mono text-xs bg-[#0c0f17] border border-border rounded-[10px] p-3 max-h-[260px] overflow-auto whitespace-pre-wrap;
  }

  .list {
    @apply flex flex-col gap-2.5;
  }

  .list-item {
    @apply grid items-center gap-3 p-2.5 rounded-xl border border-border bg-[#101522];
    grid-template-columns: minmax(0, 1fr) auto;
  }

  .list-left {
    @apply flex items-center gap-3 min-w-0 flex-1;
  }

  .meta {
    @apply flex flex-col gap-1.5 min-w-0;
  }

  .stat-row {
    @apply flex flex-wrap gap-2.5 text-xs text-muted;
  }

  .avatar {
    @apply flex flex-col items-center gap-1.5;
  }

  .avatar-button {
    @apply border-0 bg-transparent p-0 cursor-pointer;
  }

  .avatar-button:focus-visible {
    outline: 2px solid #22f4b3;
    outline-offset: 4px;
    border-radius: 12px;
  }

  .avatar-label {
    @apply text-[11px] text-muted font-mono;
  }

  .mono {
    @apply font-mono text-xs whitespace-nowrap overflow-hidden text-ellipsis max-w-[320px];
  }

  .actions {
    @apply flex flex-col gap-2 justify-center min-w-[120px];
  }

  .history {
    @apply flex flex-col gap-1.5;
  }

  .history-item {
    @apply flex items-center gap-2;
  }

  .badge {
    @apply text-[11px] px-1.5 py-0.5 rounded-[10px] bg-white/10 text-text;
  }

  .history-hint {
    @apply text-xs text-muted;
  }

  .modal-mask {
    @apply fixed inset-0 bg-black/70 flex items-center justify-center z-20;
    backdrop-filter: blur(6px);
  }

  .modal {
    @apply bg-card border border-border rounded-2xl p-4 flex flex-col gap-3 max-h-[80vh];
    width: min(860px, 92vw);
  }

  .modal-head {
    @apply flex items-center justify-between;
  }

  .modal-body {
    @apply flex flex-col gap-2.5 overflow-auto;
  }

  .history-row {
    @apply grid gap-2.5 items-center p-2.5 rounded-xl bg-[#0f141f] border border-border;
    grid-template-columns: auto auto 1fr auto auto;
  }

  .battle-stage {
    @apply relative w-full h-24 rounded-2xl border border-border bg-[#0f141f] overflow-hidden flex items-center justify-center;
  }

  .battle-orb {
    @apply absolute w-12 h-12 rounded-full overflow-hidden flex items-center justify-center;
    background: radial-gradient(circle at 30% 30%, #22f4b3, #0f172a);
    box-shadow: 0 0 18px rgba(34, 244, 179, 0.4);
  }

  .battle-orb.a {
    left: 18%;
  }

  .battle-orb.b {
    right: 18%;
    background: radial-gradient(circle at 30% 30%, #ffb347, #1f2937);
    box-shadow: 0 0 18px rgba(255, 179, 71, 0.45);
  }

  .battle-spark {
    @apply absolute w-2 h-2 rounded-full opacity-0;
    background: #ffffff;
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.8);
  }

  .battle-stage.is-animating .battle-orb.a {
    animation: orb-left 0.9s ease-in-out;
  }

  .battle-stage.is-animating .battle-orb.b {
    animation: orb-right 0.9s ease-in-out;
  }

  .battle-stage.is-animating .battle-spark {
    animation: spark 0.9s ease-in-out;
  }
}

@layer utilities {
  @media (max-width: 720px) {
    .hero {
      @apply flex-col items-start;
    }
    .wallet {
      @apply items-start;
    }
    .list-item {
      grid-template-columns: 1fr;
      @apply items-start;
    }
    .actions {
      @apply w-full flex-row justify-start;
    }
    .history-row {
      grid-template-columns: 1fr;
      @apply items-start;
    }
  }
}

@keyframes orb-left {
  0% {
    transform: translateX(0) scale(1);
  }
  45% {
    transform: translateX(90%) scale(1.15);
  }
  100% {
    transform: translateX(0) scale(1);
  }
}

@keyframes orb-right {
  0% {
    transform: translateX(0) scale(1);
  }
  45% {
    transform: translateX(-90%) scale(1.15);
  }
  100% {
    transform: translateX(0) scale(1);
  }
}

@keyframes spark {
  0% {
    opacity: 0;
    transform: scale(0.6);
  }
  40% {
    opacity: 1;
    transform: scale(1.6);
  }
  100% {
    opacity: 0;
    transform: scale(0.6);
  }
}
